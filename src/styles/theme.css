:root {
  /* Brand palette (new) */
  --lexi-cerulean: #227c9d; /* Cerulean */
  --lexi-sea: #17c3b2; /* Light sea green */
  --lexi-sunset: #ffcb77; /* Sunset */
  --lexi-floral: #fef9ef; /* Floral white */
  --lexi-lightred: #fe6d73; /* Light red */

  /* App roles */
  --lexi-primary: var(--lexi-cerulean);
  --lexi-accent: var(--lexi-sea);
  --lexi-surface: var(--lexi-floral);
  --lexi-surface-2: #ffffff;
  --lexi-neutral: var(--lexi-floral);
  --lexi-ink: #1f2937; /* readable dark text */

  /* Bootstrap CSS variables (re-skin primary/link, contextuals, body) */
  --bs-primary: var(--lexi-primary);
  --bs-primary-rgb: 34, 124, 157; /* 227C9D */
  --bs-link-color: var(--lexi-primary);
  --bs-link-hover-color: #1c6985;
  --bs-success: var(--lexi-sea);
  --bs-warning: var(--lexi-sunset);
  --bs-danger: var(--lexi-lightred);
  --bs-secondary: #6b7280; /* neutral gray for secondary text */
  --bs-body-bg: var(--lexi-surface);
  --bs-body-color: var(--lexi-ink);
}

.text-primary {
  color: var(--lexi-primary) !important;
}
.text-ink {
  color: var(--lexi-primary) !important;
}

.bg-brand {
  background: var(--lexi-surface);
}
.bg-primary-subtle {
  background: var(--lexi-surface-2) !important;
}

.bg-gradient-primary {
  background: linear-gradient(
    135deg,
    var(--lexi-cerulean) 0%,
    var(--lexi-sunset) 100%
  );
}

.feature-card:hover {
  box-shadow: 0 0.75rem 1.5rem rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
  transition: all 160ms ease;
}

.chat-bubble {
  max-width: 80%;
  padding: 0.5rem 0.75rem;
  border-radius: 0.75rem;
  font-size: 0.95rem;
}
.chat-bubble.user {
  background: var(--bs-primary);
  color: #fff;
}
.chat-bubble.assistant {
  background: var(--lexi-neutral);
  color: #2b2b2b;
}

.stat .label {
  color: #6c757d;
  font-size: 0.8rem;
}
.stat .value {
  font-size: 1.25rem;
  font-weight: 600;
}

/* Rustic surface tweaks */
body {
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
}
.card {
  background-color: var(--lexi-surface);
  border-color: color-mix(
    in oklab,
    var(--lexi-cerulean) 15%,
    var(--lexi-surface)
  );
}
.border {
  border-color: color-mix(
    in oklab,
    var(--lexi-cerulean) 15%,
    var(--lexi-surface)
  ) !important;
}
.bg-body-tertiary {
  background-color: color-mix(
    in oklab,
    var(--lexi-floral) 92%,
    white
  ) !important;
}

/* Risk severity badges mapped to palette with readable text */
.badge.text-bg-danger {
  background-color: var(--bs-danger) !important;
  color: #fff !important;
}
.badge.text-bg-warning {
  background-color: var(--bs-warning) !important;
  color: #111 !important;
}
.badge.text-bg-success {
  background-color: var(--bs-success) !important;
  color: #0f403b !important;
}

/* Buttons: accent variant (sea green) */
.btn-accent {
  --bs-btn-bg: var(--lexi-sea);
  --bs-btn-border-color: var(--lexi-sea);
  --bs-btn-hover-bg: color-mix(in oklab, var(--lexi-sea) 85%, black);
  --bs-btn-hover-border-color: color-mix(in oklab, var(--lexi-sea) 85%, black);
  --bs-btn-color: #082b2a;
}

/* Floating chat widget */
.chat-widget-fab {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  display: grid;
  place-items: center;
  z-index: 1050;
}
.chat-widget-panel {
  position: fixed;
  right: 1rem;
  bottom: 4.5rem;
  width: min(420px, 92vw);
  max-height: 65vh;
  background: var(--lexi-surface-2);
  z-index: 1050;
}
.chat-scroll {
  height: 260px;
  overflow: auto;
}

/* Summarize page with chat sidebar */
.summarize-page-container {
  transition: padding-right 0.3s ease;
}

.summarize-page-container.chat-open {
  padding-right: 400px; /* Match chat panel width */
}

/* Enhanced PDF upload container */
.pdf-upload-container {
  min-height: 180px;
  display: flex;
  justify-content: center;
}

.pdf-upload-container > div {
  width: 100%;
  max-width: 720px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

@media (max-width: 991.98px) {
  .summarize-page-container.chat-open {
    padding-right: 0; /* Remove padding on mobile */
  }

  .chat-widget-panel--full {
    width: 100%; /* Full width on mobile */
  }
}

/* Full-width variant: stick below navbar, take full width and height under nav */
.chat-widget-panel--full {
  left: auto;
  right: 0;
  bottom: 0;
  top: var(
    --lexi-nav-height,
    56px
  ); /* default navbar height; can be overridden */
  position: fixed;
  width: 400px;
  max-height: none;
  border-right: 0 !important;
}
